// index.js – GoHighLevel proxy with token‑refresh + *location‑centric* API (v1.4.4)
// ---------------------------------------------------------------------------
// ✅ CommonJS build (no "type":"module" needed)
// ✅ Keeps original refresh, media, product & contact endpoints
// ✅ Adds location‑centric routes (media + products)
// ✅ **Restores full OAuth flow** so `/api/oauth/callback` works again
// ---------------------------------------------------------------------------

/* eslint-disable no-console */

const express  = require('express');
const cors     = require('cors');
const axios    = require('axios');
const multer   = require('multer');
const FormData = require('form-data');
const fs       = require('fs');
const path     = require('path');
const app      = express();
const PORT     = process.env.PORT || 3000;

// ── Startup config sanity check -------------------------------------------
console.log('Config check:', {
  CLIENT_ID: process.env.GHL_CLIENT_ID ? '[set]' : undefined,
  REDIRECT : process.env.GHL_REDIRECT_URI || '/api/oauth/callback'
});
